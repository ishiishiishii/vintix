# なぜデータセット長が45%になったのか？

## 📊 データセット長の変化

| 項目 | 修正前 | 修正後 | 変化 |
|------|--------|--------|------|
| **総データセット長** | 156,036 | 85,345 | **-45.3%** |
| **Go2サンプル数** | 78,011 | 78,011 | 0% (変化なし) |
| **Minicheetahサンプル数** | 78,025 | 7,334 | **-90.6%** |

## 🔍 なぜ45%になったのか？

### 1. **データセットの構成比**

修正前のデータセット構成：
- Go2: 78,011サンプル (50.0%)
- Minicheetah: 78,025サンプル (50.0%)
- **合計: 156,036サンプル**

修正後のデータセット構成：
- Go2: 78,011サンプル (91.4%) ← 変化なし
- Minicheetah: 7,334サンプル (8.6%) ← 大幅減少
- **合計: 85,345サンプル**

### 2. **計算式**

```
減少率 = (156,036 - 85,345) / 156,036 × 100%
       = 70,691 / 156,036 × 100%
       = 45.3%
```

### 3. **なぜMinicheetahが90.6%減少したのか？**

`episode_range: [0.0, 0.5]`は「**エピソードの前半50%**」を指定していますが、**サンプル数はエピソード数だけでなく、各エピソードの長さにも依存**します。

#### 考えられる理由：

1. **エピソードの長さが不均一**
   - Algorithm Distillationのデータ収集では、初期のエピソード（ランダム状態）は**短い**傾向がある
   - 後半のエピソード（エキスパート状態）は**長い**傾向がある
   - そのため、前半50%のエピソードを選択すると、実際のサンプル数は50%よりも**大幅に少なく**なる

2. **エピソードの分布**
   ```
   エピソード1 (0-10%):  短い（ランダム状態、すぐに失敗）
   エピソード2 (10-20%): 短い
   エピソード3 (20-30%): 中程度
   エピソード4 (30-40%): 中程度
   エピソード5 (40-50%): 長い（改善中）
   エピソード6 (50-60%): 長い
   エピソード7 (60-70%): 長い
   エピソード8 (70-80%): 長い
   エピソード9 (80-90%): 長い
   エピソード10 (90-100%): 非常に長い（エキスパート状態）
   ```

3. **実際の影響**
   - 前半50%のエピソード（1-5）は、**短いエピソードが多い**
   - 後半50%のエピソード（6-10）は、**長いエピソードが多い**
   - そのため、前半50%を選択すると、サンプル数は50%よりも**大幅に少なく**なる

### 4. **検証**

```
Minicheetahの減少: 78,025 - 7,334 = 70,691サンプル
減少率: 70,691 / 78,025 × 100% = 90.6%

総データセット長の減少: 156,036 - 85,345 = 70,691サンプル
減少率: 70,691 / 156,036 × 100% = 45.3%
```

**結論**: Minicheetahが総データセットの50%を占めていたため、Minicheetahが90.6%減少すると、全体も約45%減少します。

## 📝 まとめ

- **`episode_range: [0.0, 0.5]`は「エピソードの前半50%」を指定**
- **しかし、サンプル数はエピソードの長さにも依存する**
- **前半のエピソードは短い傾向があるため、サンプル数は50%よりも大幅に減少（90.6%）**
- **Minicheetahが総データセットの50%を占めていたため、全体も約45%減少**

これは**正常な動作**です。エピソードの前半は短いため、サンプル数が50%よりも少なくなるのは予想される動作です。

